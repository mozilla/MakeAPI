/**
 * @license
 * (c) 2009-2012 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.0
 *
 */

if("undefined"==typeof jQuery)throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if("undefined"==typeof Slick)throw"slick.core.js not loaded";(function($){function SlickGrid(container,data,columns,options){function init(){if($container=$(container),1>$container.length)throw Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");if(maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),columnDefaults.width=options.defaultColumnWidth,options.enableColumnReorder&&!$.fn.sortable)throw Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='width:10000px; left:-1000px' />").appendTo($headerScroller),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;'>").appendTo($container),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(a){return $(a.target).is("input,textarea")}),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("scroll.slickgrid",handleScroll),$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$focusSink.bind("keydown.slickgrid",handleKeyDown),$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave))}function registerPlugin(a){plugins.unshift(a),a.init(self)}function unregisterPlugin(a){for(var b=plugins.length;b>=0;b--)if(plugins[b]===a){plugins[b].destroy&&plugins[b].destroy(),plugins.splice(b,1);break}}function setSelectionModel(a){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=a,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var a=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),b={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};return a.remove(),b}function getCanvasWidth(){for(var a=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,b=0,c=columns.length;c--;)b+=columns[c].width||columnDefaults.width;return options.fullWidthRows?Math.max(b,a):b}function updateCanvasWidth(a){var b=canvasWidth;canvasWidth=getCanvasWidth(),canvasWidth!=b&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width),(canvasWidth!=b||a)&&applyColumnWidths()}function disableSelection(a){a&&a.jquery&&a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var a=1e6,b=$.browser.mozilla?6e6:1e9,c=$("<div style='display:none' />").appendTo(document.body);;){var d=2*a;if(c.css("height",d),d>b||c.height()!==d)break;a=d}return c.remove(),a}function bindAncestorScrollEvents(){for(var a=$canvas[0];(a=a.parentNode)!=document.body&&null!=a;)(a==$viewport[0]||a.scrollWidth!=a.clientWidth||a.scrollHeight!=a.clientHeight)&&$(a).bind("scroll.slickgrid",handleActiveCellPositionChange)}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function updateColumnHeader(a,b,c){if(initialized){var d=getColumnIndex(a),e=columns[d],f=$headers.children().eq(d);f&&(void 0!==b&&(columns[d].name=b),void 0!==c&&(columns[d].toolTip=c),trigger(self.onBeforeHeaderDestroy,{headerNode:f[0],column:e}),f.attr("title",c||"").children().eq(0).html(b),trigger(self.onHeaderRendered,{headerNode:f[0],column:e}))}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(a){var b=getColumnIndex(a),c=$headerRow.children().eq(b);return c&&c[0]}function createColumnHeaders(){function a(){$(this).addClass("ui-state-hover")}function b(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var a=$(this).data("column");a&&trigger(self.onBeforeHeaderDestroy,{headerNode:this,column:a})}),$headers.empty(),$headerRow.empty(),columnsById={};for(var c=0;columns.length>c;c++){var d=columns[c]=$.extend({},columnDefaults,columns[c]);columnsById[d.id]=c;var e=$("<div class='ui-state-default slick-header-column' id='"+uid+d.id+"' />").html("<span class='slick-column-name'>"+d.name+"</span>").width(d.width-headerColumnWidthDiff).attr("title",d.toolTip||"").data("column",d).addClass(d.headerCssClass||"").appendTo($headers);(options.enableColumnReorder||d.sortable)&&e.hover(a,b),d.sortable&&e.append("<span class='slick-sort-indicator' />"),trigger(self.onHeaderRendered,{headerNode:e[0],column:d}),options.showHeaderRow&&$("<div class='ui-state-default slick-headerrow-column l"+c+" r"+c+"'></div>").appendTo($headerRow)}options.showHeaderRow&&$("<div style='display:block;height:1px;width:10000px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScroller),setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(a){if(a.metaKey=a.metaKey||a.ctrlKey,!$(a.target).hasClass("slick-resizable-handle")){var b=$(a.target).closest(".slick-header-column");if(b.length){var c=b.data("column");if(c.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var d=null,e=0;sortColumns.length>e;e++)if(sortColumns[e].columnId==c.id){d=sortColumns[e],d.sortAsc=!d.sortAsc;break}a.metaKey&&options.multiColumnSort?d&&sortColumns.splice(e,1):((a.shiftKey||a.metaKey)&&options.multiColumnSort||(sortColumns=[]),d?0==sortColumns.length&&sortColumns.push(d):(d={columnId:c.id,sortAsc:!0},sortColumns.push(d))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(a){return{sortCol:columns[getColumnIndex(a.columnId)],sortAsc:a.sortAsc}})},a):trigger(self.onSort,{multiColumnSort:!1,sortCol:c,sortAsc:d.sortAsc},a)}}}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,start:function(a,b){$(b.helper).addClass("slick-header-column-active")},beforeStop:function(a,b){$(b.helper).removeClass("slick-header-column-active")},stop:function(a){if(!getEditorLock().commitCurrentEdit())return $(this).sortable("cancel"),void 0;for(var b=$headers.sortable("toArray"),c=[],d=0;b.length>d;d++)c.push(columns[getColumnIndex(b[d].replace(uid,""))]);setColumns(c),trigger(self.onColumnsReordered,{}),a.stopPropagation(),setupColumnResize()}})}function setupColumnResize(){var a,b,c,d,e,f,g,h,i;e=$headers.children(),e.find(".slick-resizable-handle").remove(),e.each(function(a){columns[a].resizable&&(void 0===h&&(h=a),i=a)}),void 0!==h&&e.each(function(j,k){h>j||options.forceFitColumns&&j>=i||(a=$(k),$("<div class='slick-resizable-handle' />").appendTo(k).bind("dragstart",function(a){if(!getEditorLock().commitCurrentEdit())return!1;d=a.pageX,$(this).parent().addClass("slick-header-column-active");var i=null,k=null;if(e.each(function(a,b){columns[a].previousWidth=$(b).outerWidth()}),options.forceFitColumns)for(i=0,k=0,b=j+1;e.length>b;b++)c=columns[b],c.resizable&&(null!==k&&(c.maxWidth?k+=c.maxWidth-c.previousWidth:k=null),i+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth));var l=0,m=0;for(b=0;j>=b;b++)c=columns[b],c.resizable&&(null!==m&&(c.maxWidth?m+=c.maxWidth-c.previousWidth:m=null),l+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth));null===i&&(i=1e5),null===l&&(l=1e5),null===k&&(k=1e5),null===m&&(m=1e5),g=d+Math.min(i,m),f=d-Math.min(l,k)}).bind("drag",function(a){var i,l,k=Math.min(g,Math.max(f,a.pageX))-d;if(0>k){for(l=k,b=j;b>=0;b--)c=columns[b],c.resizable&&(i=Math.max(c.minWidth||0,absoluteColumnMinWidth),l&&i>c.previousWidth+l?(l+=c.previousWidth-i,c.width=i):(c.width=c.previousWidth+l,l=0));if(options.forceFitColumns)for(l=-k,b=j+1;e.length>b;b++)c=columns[b],c.resizable&&(l&&c.maxWidth&&l>c.maxWidth-c.previousWidth?(l-=c.maxWidth-c.previousWidth,c.width=c.maxWidth):(c.width=c.previousWidth+l,l=0))}else{for(l=k,b=j;b>=0;b--)c=columns[b],c.resizable&&(l&&c.maxWidth&&l>c.maxWidth-c.previousWidth?(l-=c.maxWidth-c.previousWidth,c.width=c.maxWidth):(c.width=c.previousWidth+l,l=0));if(options.forceFitColumns)for(l=-k,b=j+1;e.length>b;b++)c=columns[b],c.resizable&&(i=Math.max(c.minWidth||0,absoluteColumnMinWidth),l&&i>c.previousWidth+l?(l+=c.previousWidth-i,c.width=i):(c.width=c.previousWidth+l,l=0))}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(){var f;for($(this).parent().removeClass("slick-header-column-active"),b=0;e.length>b;b++)c=columns[b],f=$(e[b]).outerWidth(),c.previousWidth!==f&&c.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{})}))})}function getVBoxDelta(a){var b=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=0;return $.each(b,function(b,d){c+=parseFloat(a.css(d))||0}),c}function measureCellPaddingAndBorder(){var a,b=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];a=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,$.each(b,function(b,c){headerColumnWidthDiff+=parseFloat(a.css(c))||0}),$.each(c,function(b,c){headerColumnHeightDiff+=parseFloat(a.css(c))||0}),a.remove();var d=$("<div class='slick-row' />").appendTo($canvas);a=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(d),cellWidthDiff=cellHeightDiff=0,$.each(b,function(b,c){cellWidthDiff+=parseFloat(a.css(c))||0}),$.each(c,function(b,c){cellHeightDiff+=parseFloat(a.css(c))||0}),d.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var a=options.rowHeight-cellHeightDiff,b=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+a+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],c=0;columns.length>c;c++)b.push("."+uid+" .l"+c+" { }"),b.push("."+uid+" .r"+c+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=b.join(" "):$style[0].appendChild(document.createTextNode(b.join(" ")))}function getColumnCssRules(a){if(!stylesheet){for(var b=document.styleSheets,c=0;b.length>c;c++)if((b[c].ownerNode||b[c].owningElement)==$style[0]){stylesheet=b[c];break}if(!stylesheet)throw Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];for(var e,f,d=stylesheet.cssRules||stylesheet.rules,c=0;d.length>c;c++){var g=d[c].selectorText;(e=/\.l\d+/.exec(g))?(f=parseInt(e[0].substr(2,e[0].length-2),10),columnCssRulesL[f]=d[c]):(e=/\.r\d+/.exec(g))&&(f=parseInt(e[0].substr(2,e[0].length-2),10),columnCssRulesR[f]=d[c])}}return{left:columnCssRulesL[a],right:columnCssRulesR[a]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var a=plugins.length;a--;)unregisterPlugin(plugins[a]);options.enableColumnReorder&&$headers.sortable&&$headers.sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(a,b,c){return c=c||new Slick.EventData,b=b||{},b.grid=self,a.notify(b,c,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(a){return columnsById[a]}function autosizeColumns(){var a,b,f,c=[],d=0,e=0,g=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(a=0;columns.length>a;a++)b=columns[a],c.push(b.width),e+=b.width,b.resizable&&(d+=b.width-Math.max(b.minWidth,absoluteColumnMinWidth));for(f=e;e>g&&d;){var h=(e-g)/d;for(a=0;columns.length>a&&e>g;a++){b=columns[a];var i=c[a];if(!(!b.resizable||b.minWidth>=i||absoluteColumnMinWidth>=i)){var j=Math.max(b.minWidth,absoluteColumnMinWidth),k=Math.floor(h*(i-j))||1;k=Math.min(k,i-j),e-=k,d-=k,c[a]-=k}}if(f==e)break;f=e}for(f=e;g>e;){var l=g/e;for(a=0;columns.length>a&&g>e;a++)if(b=columns[a],b.resizable&&!(b.maxWidth<=b.width)){var m=Math.min(Math.floor(l*b.width)-b.width,b.maxWidth-b.width||1e6)||1;e+=m,c[a]+=m}if(f==e)break;f=e}var n=!1;for(a=0;columns.length>a;a++)columns[a].rerenderOnResize&&columns[a].width!=c[a]&&(n=!0),columns[a].width=c[a];applyColumnHeaderWidths(),updateCanvasWidth(!0),n&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(initialized)for(var a,b=0,c=$headers.children(),d=c.length;d>b;b++)a=$(c[b]),a.width()!==columns[b].width-headerColumnWidthDiff&&a.width(columns[b].width-headerColumnWidthDiff)}function applyColumnWidths(){for(var b,c,a=0,d=0;columns.length>d;d++)b=columns[d].width,c=getColumnCssRules(d),c.left.style.left=a+"px",c.right.style.right=canvasWidth-a-b+"px",a+=columns[d].width}function setSortColumn(a,b){setSortColumns([{columnId:a,sortAsc:b}])}function setSortColumns(a){sortColumns=a;var b=$headers.children();b.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(a,c){null==c.sortAsc&&(c.sortAsc=!0);var d=getColumnIndex(c.columnId);null!=d&&b.eq(d).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(c.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(a,b){selectedRows=[];for(var c={},d=0;b.length>d;d++)for(var e=b[d].fromRow;b[d].toRow>=e;e++){c[e]||selectedRows.push(e),c[e]={};for(var f=b[d].fromCell;b[d].toCell>=f;f++)canCellBeSelected(e,f)&&(c[e][columns[f].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,c),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},a)}function getColumns(){return columns}function setColumns(a){columns=a,initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(a){getEditorLock().commitCurrentEdit()&&(makeActiveCellNormal(),options.enableAddRow!==a.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,a),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render())}function setData(a,b){data=a,invalidateAllRows(),updateRowCount(),b&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataItem(a){return data.getItem?data.getItem(a):data[a]}function getTopPanel(){return $topPanel[0]}function showTopPanel(){options.showTopPanel=!0,$topPanelScroller.slideDown("fast",resizeCanvas)}function hideTopPanel(){options.showTopPanel=!1,$topPanelScroller.slideUp("fast",resizeCanvas)}function showHeaderRowColumns(){options.showHeaderRow=!0,$headerRowScroller.slideDown("fast",resizeCanvas)}function hideHeaderRowColumns(){options.showHeaderRow=!1,$headerRowScroller.slideUp("fast",resizeCanvas)}function scrollTo(a){a=Math.max(a,0),a=Math.min(a,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var b=offset;page=Math.min(n-1,Math.floor(a/ph)),offset=Math.round(page*cj);var c=a-offset;if(offset!=b){var d=getVisibleRange(c);cleanupRows(d.top,d.bottom),updateRowPositions()}prevScrollTop!=c&&(scrollDir=c+offset>prevScrollTop+b?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=c,trigger(self.onViewportChanged,{}))}function defaultFormatter(a,b,c){return null==c?"":(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(a,b){var c=data.getItemMetadata&&data.getItemMetadata(a),d=c&&c.columns&&(c.columns[b.id]||c.columns[getColumnIndex(b.id)]);return d&&d.formatter||c&&c.formatter||b.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(b)||options.defaultFormatter}function getEditor(a,b){var c=columns[b],d=data.getItemMetadata&&data.getItemMetadata(a),e=d&&d.columns;return e&&e[c.id]&&void 0!==e[c.id].editor?e[c.id].editor:e&&e[b]&&void 0!==e[b].editor?e[b].editor:c.editor||options.editorFactory&&options.editorFactory.getEditor(c)}function getDataItemValueForColumn(a,b){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(a,b):a[b.field]}function appendRowHtml(a,b){var e,c=getDataItem(b),d=getDataLength()>b&&!c,f="slick-row"+(d?" loading":"")+(1==b%2?" odd":" even"),g=data.getItemMetadata&&data.getItemMetadata(b);g&&g.cssClasses&&(f+=" "+g.cssClasses),a.push("<div class='ui-widget-content "+f+"' style='top:"+(options.rowHeight*b-offset)+"px'>");for(var h,i,j=0,k=columns.length;k>j;j++){i=columns[j],h=getColspan(b,j),e="slick-cell l"+j+" r"+Math.min(columns.length-1,j+h-1)+(i.cssClass?" "+i.cssClass:""),b===activeRow&&j===activeCell&&(e+=" active");for(var l in cellCssClasses)cellCssClasses[l][b]&&cellCssClasses[l][b][i.id]&&(e+=" "+cellCssClasses[l][b][i.id]);if(a.push("<div class='"+e+"'>"),c){var m=getDataItemValueForColumn(c,i);a.push(getFormatter(b,i)(b,j,m,i,c))}a.push("</div>"),h&&(j+=h-1)}a.push("</div>")}function cleanupRows(a){for(var b in rowsCache)(b=parseInt(b,10))!==activeRow&&(a.top>b||b>a.bottom)&&removeRowFromCache(b)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var a in rowsCache)removeRowFromCache(a)}function removeRowFromCache(a){var b=rowsCache[a];b&&($canvas[0].removeChild(b.rowNode),delete rowsCache[a],delete postProcessedRows[a],renderedRows--,counter_rows_removed++)}function invalidateRows(a){var b,c;if(a&&a.length)for(scrollDir=0,b=0,c=a.length;c>b;b++)currentEditor&&activeRow===a[b]&&makeActiveCellNormal(),rowsCache[a[b]]&&removeRowFromCache(a[b])}function invalidateRow(a){invalidateRows([a])}function updateCell(a,b){var c=getCellNode(a,b);if(c){var d=columns[b],e=getDataItem(a);currentEditor&&activeRow===a&&activeCell===b?currentEditor.loadValue(e):(c.innerHTML=e?getFormatter(a,d)(a,b,getDataItemValueForColumn(e,d),d,e):"",invalidatePostProcessingResults(a))}}function updateRow(a){var b=rowsCache[a];if(b){ensureCellNodesInRowsCache(a);for(var c in b.cellNodesByColumnIdx){c=0|c;var d=columns[c],e=getDataItem(a),f=b.cellNodesByColumnIdx[c];a===activeRow&&c===activeCell&&currentEditor?currentEditor.loadValue(e):f.innerHTML=e?getFormatter(a,d)(a,c,getDataItemValueForColumn(e,d),d,e):""}invalidatePostProcessingResults(a)}}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){initialized&&(viewportH=options.autoHeight?options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0)):getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),render())}function updateRowCount(){if(initialized){numberOfRows=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var a=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&numberOfRows*options.rowHeight>viewportH;var b=options.enableAddRow?getDataLength():getDataLength()-1;for(var c in rowsCache)c>=b&&removeRowFromCache(c);var d=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height),maxSupportedCssHeight>th?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==d&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var e=th-viewportH>=scrollTop+offset;0==th||0==scrollTop?page=offset=0:e?scrollTo(scrollTop+offset):scrollTo(th-viewportH),h!=d&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&a!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(a){return null==a&&(a=scrollTop),{top:Math.floor((a+offset)/options.rowHeight),bottom:Math.ceil((a+offset+viewportH)/options.rowHeight)}}function getRenderedRange(a){var b=getVisibleRange(a),c=Math.round(viewportH/options.rowHeight),d=3;return-1==scrollDir?(b.top-=c,b.bottom+=d):1==scrollDir?(b.top-=d,b.bottom+=c):(b.top-=d,b.bottom+=d),b.top=Math.max(0,b.top),b.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,b.bottom),b}function ensureCellNodesInRowsCache(a){var b=rowsCache[a];if(b&&!b.cellNodes){b.cellNodes=[],b.cellNodesByColumnIdx=[];for(var c=0,d=b.rowNode.childNodes,e=0,f=d.length;f>e;e++)b.cellNodesByColumnIdx[c]=b.cellNodes[e]=d[e],c+=getColspan(a,c)}}function renderRows(a){for(var b=$canvas[0],c=[],d=[],e=!1,f=a.top;a.bottom>=f;f++)rowsCache[f]||(renderedRows++,d.push(f),appendRowHtml(c,f),activeCellNode&&activeRow===f&&(e=!0),counter_rows_rendered++);if(d.length){var g=document.createElement("div");g.innerHTML=c.join("");for(var f=0,h=g.childNodes.length;h>f;f++)rowsCache[d[f]]={rowNode:b.appendChild(g.firstChild),cellNodes:null,cellNodesByColumnIdx:null};e&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function invalidatePostProcessingResults(a){delete postProcessedRows[a],postProcessFromRow=Math.min(postProcessFromRow,a),postProcessToRow=Math.max(postProcessToRow,a),startPostProcessing()}function updateRowPositions(){for(var a in rowsCache)rowsCache[a].rowNode.style.top=a*options.rowHeight-offset+"px"}function render(){if(initialized){var a=getVisibleRange(),b=getRenderedRange();cleanupRows(b),renderRows(b),postProcessFromRow=a.top,postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,a.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,h_render=null}}function handleScroll(){scrollTop=$viewport[0].scrollTop;var a=$viewport[0].scrollLeft,b=Math.abs(scrollTop-prevScrollTop);if(a!==prevScrollLeft&&(prevScrollLeft=a,$headerScroller[0].scrollLeft=a,$topPanelScroller[0].scrollLeft=a,$headerRowScroller[0].scrollLeft=a),b){if(scrollDir=scrollTop>prevScrollTop?1:-1,prevScrollTop=scrollTop,viewportH>b)scrollTo(scrollTop+offset);else{var c=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),c!=offset&&invalidateAllRows()}h_render&&clearTimeout(h_render),viewportH>Math.abs(lastRenderedScrollTop-scrollTop)?Math.abs(lastRenderedScrollTop-scrollTop)>20&&render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{})}trigger(self.onScroll,{scrollLeft:a,scrollTop:scrollTop})}function asyncPostProcessRows(){for(;postProcessToRow>=postProcessFromRow;){var a=scrollDir>=0?postProcessFromRow++:postProcessToRow--,b=rowsCache[a];if(!(!b||postProcessedRows[a]||a>=getDataLength())){ensureCellNodesInRowsCache(a);for(var c=0;b.cellNodesByColumnIdx.length>c;c++){var d=columns[c];if(d.asyncPostRender){var e=b.cellNodesByColumnIdx[c];d.asyncPostRender(e,postProcessFromRow,getDataItem(a),d)}}return postProcessedRows[a]=!0,h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay),void 0}}}function updateCellCssStylesOnRenderedRows(a,b){var c,d,e,f;for(var g in rowsCache){if(f=b&&b[g],e=a&&a[g],f)for(d in f)e&&f[d]==e[d]||(c=getCellNode(g,getColumnIndex(d)),c&&$(c).removeClass(f[d]));if(e)for(d in e)f&&f[d]==e[d]||(c=getCellNode(g,getColumnIndex(d)),c&&$(c).addClass(e[d]))}}function addCellCssStyles(a,b){if(cellCssClasses[a])throw"addCellCssStyles: cell CSS hash with key '"+a+"' already exists.";cellCssClasses[a]=b,updateCellCssStylesOnRenderedRows(b,null),trigger(self.onCellCssStylesChanged,{key:a,hash:b})}function removeCellCssStyles(a){cellCssClasses[a]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[a]),delete cellCssClasses[a],trigger(self.onCellCssStylesChanged,{key:a,hash:null}))}function setCellCssStyles(a,b){var c=cellCssClasses[a];cellCssClasses[a]=b,updateCellCssStylesOnRenderedRows(b,c),trigger(self.onCellCssStylesChanged,{key:a,hash:b})}function getCellCssStyles(a){return cellCssClasses[a]}function flashCell(a,b,c){function e(a){a&&setTimeout(function(){d.queue(function(){d.toggleClass(options.cellFlashingCssClass).dequeue(),e(a-1)})},c)}if(c=c||100,rowsCache[a]){var d=$(getCellNode(a,b));e(4)}}function handleDragInit(a,b){var c=getCellFromEvent(a);return c&&cellExists(c.row,c.cell)?(retval=trigger(self.onDragInit,b,a),a.isImmediatePropagationStopped()?retval:!1):!1}function handleDragStart(a,b){var c=getCellFromEvent(a);if(!c||!cellExists(c.row,c.cell))return!1;var d=trigger(self.onDragStart,b,a);return a.isImmediatePropagationStopped()?d:!1}function handleDrag(a,b){return trigger(self.onDrag,b,a)}function handleDragEnd(a,b){trigger(self.onDragEnd,b,a)}function handleKeyDown(a){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},a);var b=a.isImmediatePropagationStopped();if(!b)if(a.shiftKey||a.altKey||a.ctrlKey){if(9!=a.which||!a.shiftKey||a.ctrlKey||a.altKey)return;navigatePrev()}else if(27==a.which){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else if(37==a.which)navigateLeft();else if(39==a.which)navigateRight();else if(38==a.which)navigateUp();else if(40==a.which)navigateDown();else if(9==a.which)navigateNext();else{if(13!=a.which)return;options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable())}a.stopPropagation(),a.preventDefault();try{a.originalEvent.keyCode=0}catch(c){}}function handleClick(a){currentEditor||a.target!=document.activeElement&&setFocus();var b=getCellFromEvent(a);!b||null!==currentEditor&&activeRow==b.row&&activeCell==b.cell||(trigger(self.onClick,{row:b.row,cell:b.cell},a),a.isImmediatePropagationStopped()||activeCell==b.cell&&activeRow==b.row||!canCellBeActive(b.row,b.cell)||(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit())&&(scrollRowIntoView(b.row,!1),setActiveCellInternal(getCellNode(b.row,b.cell),b.row===getDataLength()||options.autoEdit)))}function handleContextMenu(a){var b=$(a.target).closest(".slick-cell",$canvas);0!==b.length&&(activeCellNode!==b[0]||null===currentEditor)&&trigger(self.onContextMenu,{},a)}function handleDblClick(a){var b=getCellFromEvent(a);!b||null!==currentEditor&&activeRow==b.row&&activeCell==b.cell||(trigger(self.onDblClick,{row:b.row,cell:b.cell},a),a.isImmediatePropagationStopped()||options.editable&&gotoCell(b.row,b.cell,!0))}function handleHeaderMouseEnter(a){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},a)}function handleHeaderMouseLeave(a){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},a)}function handleHeaderContextMenu(a){var b=$(a.target).closest(".slick-header-column",".slick-header-columns"),c=b&&b.data("column");trigger(self.onHeaderContextMenu,{column:c},a)}function handleHeaderClick(a){var b=$(a.target).closest(".slick-header-column",".slick-header-columns"),c=b&&b.data("column");c&&trigger(self.onHeaderClick,{column:c},a)}function handleMouseEnter(a){trigger(self.onMouseEnter,{},a)}function handleMouseLeave(a){trigger(self.onMouseLeave,{},a)}function cellExists(a,b){return!(0>a||a>=getDataLength()||0>b||b>=columns.length)}function getCellFromPoint(a,b){for(var c=Math.floor((b+offset)/options.rowHeight),d=0,e=0,f=0;columns.length>f&&a>e;f++)e+=columns[f].width,d++;return 0>d&&(d=0),{row:c,cell:d-1}}function getCellFromNode(a){var b=/l\d+/.exec(a.className);if(!b)throw"getCellFromNode: cannot get cell - "+a.className;return parseInt(b[0].substr(1,b[0].length-1),10)}function getRowFromNode(a){for(var b in rowsCache)if(rowsCache[b].rowNode===a)return 0|b;return null}function getCellFromEvent(a){var b=$(a.target).closest(".slick-cell",$canvas);if(!b.length)return null;var c=getRowFromNode(b[0].parentNode),d=getCellFromNode(b[0]);return null==c||null==d?null:{row:c,cell:d}}function getCellNodeBox(a,b){if(!cellExists(a,b))return null;for(var c=a*options.rowHeight-offset,d=c+options.rowHeight-1,e=0,f=0;b>f;f++)e+=columns[f].width;var g=e+columns[b].width;return{top:c,left:e,bottom:d,right:g}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){$focusSink[0].focus()}function scrollActiveCellIntoView(){if(activeCellNode){var a=$(activeCellNode).position().left,b=a+$(activeCellNode).outerWidth(),c=$viewport.scrollLeft(),d=c+$viewport.width();c>a?$viewport.scrollLeft(a):b>d&&$viewport.scrollLeft(Math.min(a,b-$viewport[0].clientWidth))}}function setActiveCellInternal(a,b){null!==activeCellNode&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"));var c=activeCellNode!==a;activeCellNode=a,null!=activeCellNode?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),$(activeCellNode).addClass("active"),options.editable&&b&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,c&&(scrollActiveCellIntoView(),trigger(self.onActiveCellChanged,getActiveCell()))
}function clearTextSelection(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}}function isCellPotentiallyEditable(a,b){return getDataLength()>a&&!getDataItem(a)?!1:columns[b].cannotTriggerInsert&&a>=getDataLength()?!1:getEditor(a,b)?!0:!1}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var a=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),a){var b=columns[activeCell],c=getFormatter(activeRow,b);activeCellNode.innerHTML=c(activeRow,activeCell,getDataItemValueForColumn(a,b),b,getDataItem(activeRow)),invalidatePostProcessingResults(activeRow)}}$.browser.msie&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(a){if(activeCellNode){if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(activeRow,activeCell)){var b=columns[activeCell],c=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:c,column:b})===!1)return setFocus(),void 0;getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),a||(activeCellNode.innerHTML=""),currentEditor=new(a||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:b,item:c||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),c&&currentEditor.loadValue(c),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(a){var b={top:a.offsetTop,left:a.offsetLeft,bottom:0,right:0,width:$(a).outerWidth(),height:$(a).outerHeight(),visible:!0};b.bottom=b.top+b.height,b.right=b.left+b.width;for(var c=a.offsetParent;(a=a.parentNode)!=document.body;)b.visible&&a.scrollHeight!=a.offsetHeight&&"visible"!=$(a).css("overflowY")&&(b.visible=b.bottom>a.scrollTop&&b.top<a.scrollTop+a.clientHeight),b.visible&&a.scrollWidth!=a.offsetWidth&&"visible"!=$(a).css("overflowX")&&(b.visible=b.right>a.scrollLeft&&b.left<a.scrollLeft+a.clientWidth),b.left-=a.scrollLeft,b.top-=a.scrollTop,a===c&&(b.left+=a.offsetLeft,b.top+=a.offsetTop,c=a.offsetParent),b.bottom=b.top+b.height,b.right=b.left+b.width;return b}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var a=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(a.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(a)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(a,b){var c=a*options.rowHeight,d=(a+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(a+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(b?c:d),render()):scrollTop+offset>a*options.rowHeight&&(scrollTo(b?d:c),render())}function scrollRowToTop(a){scrollTo(a*options.rowHeight),render()}function getColspan(a,b){var c=data.getItemMetadata&&data.getItemMetadata(a);if(!c||!c.columns)return 1;var d=c.columns[columns[b].id]||c.columns[b],e=d&&d.colspan;return"*"===e&&(e=columns.length-b),e||1}function findFirstFocusableCell(a){for(var b=0;columns.length>b;){if(canCellBeActive(a,b))return b;b+=getColspan(a,b)}return null}function findLastFocusableCell(a){for(var b=0,c=null;columns.length>b;)canCellBeActive(a,b)&&(c=b),b+=getColspan(a,b);return c}function gotoRight(a,b){if(b>=columns.length)return null;do b+=getColspan(a,b);while(columns.length>b&&!canCellBeActive(a,b));return columns.length>b?{row:a,cell:b,posX:b}:null}function gotoLeft(a,b){if(0>=b)return null;var d=findFirstFocusableCell(a);if(null===d||d>=b)return null;for(var f,e={row:a,cell:d,posX:d};;){if(f=gotoRight(e.row,e.cell,e.posX),!f)return null;if(f.cell>=b)return e;e=f}}function gotoDown(a,b,c){for(var d;;){if(++a>=getDataLength()+(options.enableAddRow?1:0))return null;for(d=b=0;c>=b;)d=b,b+=getColspan(a,b);if(canCellBeActive(a,d))return{row:a,cell:d,posX:c}}}function gotoUp(a,b,c){for(var d;;){if(0>--a)return null;for(d=b=0;c>=b;)d=b,b+=getColspan(a,b);if(canCellBeActive(a,d))return{row:a,cell:d,posX:c}}}function gotoNext(a,b,c){var d=gotoRight(a,b,c);if(d)return d;for(var e=null;++a<getDataLength()+(options.enableAddRow?1:0);)if(e=findFirstFocusableCell(a),null!==e)return{row:a,cell:e,posX:e};return null}function gotoPrev(a,b,c){for(var d,e;!d&&!(d=gotoLeft(a,b,c));){if(0>--a)return null;b=0,e=findLastFocusableCell(a),null!==e&&(d={row:a,cell:e,posX:e})}return d}function navigateRight(){navigate("right")}function navigateLeft(){navigate("left")}function navigateDown(){navigate("down")}function navigateUp(){navigate("up")}function navigateNext(){navigate("next")}function navigatePrev(){navigate("prev")}function navigate(a){if(activeCellNode&&options.enableCellNavigation&&getEditorLock().commitCurrentEdit()){setFocus();var b={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext},c=b[a],d=c(activeRow,activeCell,activePosX);if(d){var e=d.row==getDataLength();scrollRowIntoView(d.row,!e),setActiveCellInternal(getCellNode(d.row,d.cell),e||options.autoEdit),activePosX=d.posX}else setActiveCellInternal(getCellNode(activeRow,activeCell),activeRow==getDataLength()||options.autoEdit)}}function getCellNode(a,b){return rowsCache[a]?(ensureCellNodesInRowsCache(a),rowsCache[a].cellNodesByColumnIdx[b]):null}function setActiveCell(a,b){initialized&&(a>getDataLength()||0>a||b>=columns.length||0>b||options.enableCellNavigation&&(scrollRowIntoView(a,!1),setActiveCellInternal(getCellNode(a,b),!1)))}function canCellBeActive(a,b){if(!options.enableCellNavigation||a>=getDataLength()+(options.enableAddRow?1:0)||0>a||b>=columns.length||0>b)return!1;var c=data.getItemMetadata&&data.getItemMetadata(a);if(c&&"boolean"==typeof c.focusable)return c.focusable;var d=c&&c.columns;return d&&d[columns[b].id]&&"boolean"==typeof d[columns[b].id].focusable?d[columns[b].id].focusable:d&&d[b]&&"boolean"==typeof d[b].focusable?d[b].focusable:"boolean"==typeof columns[b].focusable?columns[b].focusable:!0}function canCellBeSelected(a,b){if(a>=getDataLength()||0>a||b>=columns.length||0>b)return!1;var c=data.getItemMetadata&&data.getItemMetadata(a);if(c&&"boolean"==typeof c.selectable)return c.selectable;var d=c&&c.columns&&(c.columns[columns[b].id]||c.columns[b]);return d&&"boolean"==typeof d.selectable?d.selectable:"boolean"==typeof columns[b].selectable?columns[b].selectable:!0}function gotoCell(a,b,c){if(initialized&&canCellBeActive(a,b)&&getEditorLock().commitCurrentEdit()){scrollRowIntoView(a,!1);var d=getCellNode(a,b);setActiveCellInternal(d,c||a===getDataLength()||options.autoEdit),currentEditor||setFocus()}}function commitCurrentEdit(){var a=getDataItem(activeRow),b=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var c=currentEditor.validate();if(c.valid){if(getDataLength()>activeRow){var d={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(a,this.serializedValue),updateRow(this.row)},undo:function(){this.editor.applyValue(a,this.prevSerializedValue),updateRow(this.row)}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(a,b,d)):(d.execute(),makeActiveCellNormal()),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:a})}else{var e={};currentEditor.applyValue(e,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:e,column:b})}return!getEditorLock().isActive()}return $(activeCellNode).addClass("invalid"),$(activeCellNode).stop(!0,!0).effect("highlight",{color:"red"},300),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:c,row:activeRow,cell:activeCell,column:b}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(a){for(var b=[],c=columns.length-1,d=0;a.length>d;d++)b.push(new Slick.Range(a[d],0,a[d],c));return b}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(a){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(a))}var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:60,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null},th,h,ph,n,cj,page=0,offset=0,scrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$headerScroller,$headers,$headerRow,$headerRowScroller,$topPanelScroller,$topPanel,$viewport,$canvas,$style,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,absoluteColumnMinWidth,numberOfRows=0,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,prevScrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0;this.debug=function(){var a="";a+="\ncounter_rows_rendered:  "+counter_rows_rendered,a+="\ncounter_rows_removed:  "+counter_rows_removed,a+="\nrenderedRows:  "+renderedRows,a+="\nnumVisibleRows:  "+numVisibleRows,a+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,a+="\nn(umber of pages):  "+n,a+="\n(current) page:  "+page,a+="\npage height (ph):  "+ph,a+="\nscrollDir:  "+scrollDir,alert(a)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.0",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderRendered:new Slick.Event,onBeforeHeaderDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,showTopPanel:showTopPanel,hideTopPanel:hideTopPanel,showHeaderRowColumns:showHeaderRowColumns,hideHeaderRowColumns:hideHeaderRowColumns,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions,maxSupportedCssHeight})(jQuery);
